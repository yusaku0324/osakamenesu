# 大阪メンエス.com 機能バックログ（優先度付き）

本書は要件定義で挙げた未対応項目を整理し、優先度と初手タスクをまとめたものです。優先度は P0 (最優先) / P1 / P2 / P3 の 4 段階で定義します。

| ID | 項目 | 優先度 | 背景/期待効果 | 初手タスク | 所感 |
| --- | --- | --- | --- | --- | --- |
| BL-001 | 予約通知連携（メール/SMS/LINE） | **P0** | 予約フォーム送信後に店舗側が即時把握できず、機会損失リスクが高い。 | - 通知チャネル候補を決定（メール + LINE Notify など）<br>- 通知テンプレートと送信先を設定可能にする DB 項目を追加<br>- FastAPI 側で予約作成時に非同期送信処理を実装 | 通知遅延は UX 直結。早期に最小チャネル（メール）だけでも稼働させる。 |
| BL-002 | 店舗セルフ管理 UI（ダッシュボード） | **P0** | 現状は運営が API/key で手動更新しており、店舗回転が上がると運用負荷が破綻する。 | - 店舗アカウント概念と認証方式を決定（メール + Magic Link など）<br>- Next.js 側に `/dashboard` を用意しプロフィール・シフト・日記編集を行えるフォームを設計<br>- 権限チェック付き API エンドポイントを追加 | 大型機能だが今後のスケールに必須。段階的リリースを想定。 |
| BL-003 | エンドユーザ会員ログイン/お気に入り | **P1** | 会員機能が無いため、再訪や予約履歴の管理ができない。顧客ロイヤリティを高めたい。 | - 利用者アカウントモデルを設計（メール or LINE 連携）<br>- お気に入り店舗/閲覧履歴の保存スキーマ策定<br>- フロントで「お気に入り」「閲覧履歴」UI を追加 | 店舗側成果指標を高めるための中期改善。セルフ管理 UI の後着手。 |
| BL-004 | 地図・駅別検索 / 距離ソート | **P1** | エリア粒度が粗く、駅近や現在地周辺検索ができない。競合（シティヘブン等）との差別化に必要。 | - `GeoLocation` を元に Meilisearch で距離ソートできるようスキーマ更新<br>- Map コンポーネント (Mapbox/Google Maps) の導入検証<br>- 駅コード辞書を整備して facet/フィルタに追加 | 位置情報を既に保持しているため実装可能。UI 作り込みに時間を要する。 |
| BL-005 | 広告メニュー管理（PR枠/クーポン管理） | **P2** | 現状プロモーションは手動 JSON 管理。広告課金を見据えた枠管理・レポーティングが無い。 | - PR 枠の種別と表示ロジックを要件化<br>- 課金プラン/露出期間を管理するテーブル追加<br>- 表示ログ計測とダッシュボード案を作成 | 収益化ポイント。セルフ管理 UI と連動させると効果大。 |
| BL-006 | 観測性強化（エラーレポート・トラッキング） | **P2** | GA のみだと API 障害や予約失敗が検知できない。品質リスク。 | - Sentry 等の APM 導入検討<br>- API ログの構造化（JSON logging）<br>- 予約エラー時の告知チャネル整備 | 優先度は中程度だが早めに仕込みたい。通知基盤とセットで進める。 |
| BL-007 | コンテンツ SEO / CMS 連携 | **P3** | 初めての方向け記事やブログを手作業で更新予定。CMS 化で更新効率を上げたい。 | - CMS 選定（Contentful / microCMS / Notion API 等）<br>- `/demo/blog` の静的生成/ISR 設計<br>- 記事コンポーネントのデザイン整備 | 他優先項目の後。MVP 成功後に強化。 |

## 実行メモ

- P0 タスク（BL-001, BL-002）は直近スプリントで着手し、通知→セルフ管理の順に進める想定。
- P1 以降は P0 の進捗を見ながらロードマップ化。位置情報検索はバックエンド改修が比較的軽いため前倒し候補。
- バックログは定期的に見直し、本ドキュメントへ追記する。

## P0 スプリント計画（レビュー結果）

| タスク | 期間 | オーナー | マイルストーン | 補足 |
| --- | --- | --- | --- | --- |
| BL-001 予約通知連携 | Sprint 24-07 (2 週間) | Backend: @taro.dev<br>Infra 支援: @akane.ops | Day 3: 通知チャネル決定と設計レビュー<br>Day 7: メール送信実装 + ステージング動作確認<br>Day 10: LINE Notify/Slack webhook の PoC<br>Day 14: 本番向け設定手順書を更新 | FastAPI で `BackgroundTasks` を利用し非同期送信。秘密情報は `.env` 管理。通知失敗時のリトライ/アラート設計を並走。 |
| BL-002 店舗セルフ管理 UI | Sprint 24-08〜24-09 (4 週間) | Frontend: @yuki.ui<br>Backend: @suzuki.api | Sprint 24-08 Day 5: 認証フロー仕様確定（Magic Link 案）<br>Day 10: `/dashboard` ワイヤー案 & API 下書きレビュー<br>Sprint 24-09 Day 5: プロフィール編集 MVP リリース<br>Day 20: シフト/日記編集とアクセス権限テーブル実装 | 認証には Supabase Auth を暫定採用。初期リリースはプロファイル編集＋通知先設定に絞る。QA 専任をアサインし UAT 実施。 |

- @pm-lead がスプリント開始時にタスク分解（チケット化）とバーンダウンの管理を担当。
- 依存タスク（例: 通知で利用するメール送信サービス契約）はオーナーが別途 Issues/TODO として起票。
- レビューは週次（火曜）スタンドアップで進捗共有し、遅延時は優先度調整を行う。
